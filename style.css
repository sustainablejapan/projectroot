/* --- ROOT VARIABLES (NEW BOLD/SIMPLE THEME V2) --- */
:root {
    --waste-orange: #E67E22;
    --compost-green: #27AE60;
    --recycle-blue: #3498DB;
    --light-bg: #F9F9F9;      
    --mid-bg: #FFFFFF;
    --dark-text: #1A1A1A;
    --muted-text: #707070;
    --light-text: #FFFFFF;
    --border-color: #1A1A1A; /* Strong black borders */
    --nav-height: 84px;
    --theme-primary-faded: rgba(52, 152, 219, 0.1);

    /* Standardized radii */
    --radius-main: 12px;
    --radius-small: 8px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body { 
    background: var(--mid-bg); 
    color: var(--dark-text); 
    font-family: 'Inter', sans-serif; 
    overflow-x: hidden; 
    line-height: 1.7; 
    opacity: 0; 
    transition: opacity 0.5s ease-in-out; 
    border-top: 5px solid var(--dark-text); /* Site-wide top border */
}
body.fade-in { opacity: 1; }
body.nav-open {
    overflow: hidden; /* Stops scrolling when mobile nav is open */
}

/* --- THEME-AWARE STYLES --- */
.page-sort { --theme-primary: var(--recycle-blue); }
.page-soil { --theme-primary: var(--compost-green); }
.page-about,
.page-home,
.page-root { 
    --theme-primary: var(--compost-green); /* Default to green */
}

/* --- NEW FONT SYSTEM --- */
.font-display { 
    font-family: 'Inter', sans-serif; 
    font-weight: 700; /* Bolder weight from Inter */
}
.text-center { text-align: center; }
.text-xl { font-size: 1.25rem; line-height: 1.6; color: var(--muted-text); max-width: 800px; margin: 0 auto; }
.stats-title { font-size: clamp(2.5rem, 5vw, 3.5rem); margin-bottom: 1.5rem; }

/* --- NAVIGATION --- */
.main-nav {
    position: fixed; 
    top: 5px; /* Account for new body border */
    left: 0; right: 0;
    z-index: 1000; padding: 24px 32px;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-color);
    display: flex; justify-content: space-between; align-items: center;
}
.nav-logo { 
    display: flex;
    align-items: center;
    text-decoration: none;
}
.nav-logo-img {
    height: 40px;
    width: auto;
}
.nav-links { display: flex; gap: 40px; align-items: center; }
.nav-item { color: var(--muted-text); text-decoration: none; font-weight: 500; font-size: 15px; transition: color 0.2s ease; }
.nav-item:hover { color: var(--dark-text); }
.nav-cta {
    background: var(--compost-green);
    color: var(--light-text);
    padding: 10px 16px;
    border-radius: var(--radius-small);
    border: 2px solid var(--border-color);
    font-size: 14px;
    font-weight: 700;
    text-decoration: none;
    font-family: 'Inter', sans-serif;
    transition: all 0.2s ease;
    box-shadow: 4px 4px 0px var(--dark-text);
}
.nav-cta:hover {
    box-shadow: 2px 2px 0px var(--dark-text);
    transform: translate(2px, 2px);
}

/* --- HOMEPAGE SPECIFIC STYLES --- */
/* NO NAV on homepage */

.hero { 
    height: 100vh; /* Only hero is 100vh */
    width: 100%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    position: relative; 
}
.hero-video { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); z-index: 1; }
.hero-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.1) 70%, rgba(0,0,0,0) 100%);
    z-index: 2;
}
.hero-content { text-align: center; z-index: 3; color: var(--light-text); position: relative; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
.hero-title { 
    font-size: clamp(50px, 10vw, 120px); 
    line-height: 1.1; 
    font-weight: 800; /* Extra bold for hero */
}
.hero-subtitle { font-size: clamp(18px, 3vw, 28px); color: var(--light-text); margin-top: 1rem; }
#cycling-word {
    display: inline-block;
    position: relative;
    vertical-align: bottom;
    opacity: 0; /* JS controls this */
}
.scroll-arrow {
    opacity: 0; /* JS controls this */
    position: absolute; bottom: 40px; left: 50%;
    transform: translateX(-50%);
    color: var(--light-text); font-size: 2rem;
    cursor: pointer; animation: bounce 2s infinite;
    width: 50px; height: 50px;
    border: 1px solid var(--light-text);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    transition: opacity 0.5s ease 1s;
    z-index: 5;
}
@keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translate(-50%, 0); } 40% { transform: translate(-50%, -8px); } 60% { transform: translate(-50%, -4px); } }

/* --- STANDARD PAGE WRAPPER (FIXED) --- */
.page-wrapper { 
    min-height: 100vh; 
    padding-top: calc(var(--nav-height) + 5px); /* Accounts for nav AND body border */
}

/* --- CONTENT SECTIONS (REDUCED SPACING) --- */
.content-section {
    padding: 4rem 2rem; /* Reduced from 6rem */
    max-width: 1200px;
    margin: 0 auto;
}
.content-section.bg-light { background: var(--light-bg); }
.content-section.bg-white { background: var(--mid-bg); }
.content-section.bg-dark { background: var(--dark-text); color: var(--light-text); }

.content-container {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

.content-image {
    width: 100%;
    max-height: 500px;
    object-fit: cover;
    border-radius: var(--radius-main);
    margin: 3rem 0;
}

/* --- STATS SECTION --- */
.waste-stats { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
    gap: 2rem;
    margin-top: 3rem; /* Reduced from 4rem */
}
.stat { 
    text-align: left; 
    cursor: pointer; 
    padding: 2rem; 
    background-color: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    transition: all 0.2s ease;
}
.stat:hover { 
    transform: translate(-4px, -4px);
    box-shadow: 8px 8px 0px var(--border-color);
}
.stat-visual { height: 120px; margin-bottom: 1.5rem; display: flex; align-items: flex-end; justify-content: center; }
.waste-pile { width: 80px; height: 100%; background-color: #EAEAEA; border-radius: 4px; position: relative; overflow: hidden; border: 2px solid var(--border-color);}
.pile-segment { position: absolute; bottom: 0; left: 0; width: 100%; background-color: var(--waste-orange); transition: height 1.5s ease-out; }
.bar-graph { width: 100%; height: 30px; background-color: #EAEAEA; border-radius: 4px; border: 2px solid var(--border-color); }
.bar-fill { height: 100%; border-radius: 0px; transition: width 1.5s ease-out; }
.bar-fill.recycle { background-color: var(--recycle-blue); }
.donut-chart { width: 100px; height: 100px; }
.donut-ring { fill: none; stroke: #EAEAEA; stroke-width: 4; }
.donut-segment { fill: none; stroke-width: 4; stroke-linecap: round; transition: stroke-dasharray 1.5s ease-out; transform-origin: 50% 50%; transform: rotate(-90deg); }
.donut-segment.compost { stroke: var(--compost-green); }
.stat-header { display: flex; align-items: baseline; gap: 0.5rem; margin-bottom: 1rem; }
.stat-number { font-size: 56px; font-weight: 800; font-family: 'Inter', sans-serif; }
.stat-unit { font-size: 1rem; color: var(--muted-text); }
.stat-label { font-size: 14px; color: var(--muted-text); text-transform: lowercase; letter-spacing: 0.5px; font-weight: 500; }

/* --- NEW: HOMEPAGE TOPIC CARDS --- */
.home-topic-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}
@media (min-width: 768px) {
    .home-topic-grid { grid-template-columns: 1fr 1fr; }
}
.topic-card {
    background: var(--light-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    transition: all 0.2s ease;
}
.topic-card:hover {
    transform: translate(-4px, -4px);
    box-shadow: 8px 8px 0px var(--border-color);
}
.topic-card-header {
    margin-bottom: 1.5rem;
}
.topic-card-header h2 {
    font-size: 2.5rem;
    font-weight: 700;
}
.topic-card.sort h2 { color: var(--recycle-blue); }
.topic-card.soil h2 { color: var(--compost-green); }

.topic-card p {
    color: var(--muted-text);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    flex-grow: 1; /* Makes description fill space */
}
.topic-card-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
.topic-card .cta-button {
    width: 100%;
    padding: 16px 24px; /* Slightly smaller button */
}
.topic-card .cta-button.info {
    background: var(--mid-bg);
    color: var(--dark-text);
}
.topic-card .cta-button.play {
    color: var(--light-text);
}
.topic-card.sort .cta-button.play { background: var(--recycle-blue); }
.topic-card.soil .cta-button.play { background: var(--compost-green); }


/* --- PROJECT R.O.O.T. CTA --- */
.project-root-cta {
    display: grid;
    grid-template-columns: 1fr;
    align-items: center;
    gap: 2rem;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    background: var(--light-bg);
}
@media (min-width: 768px) {
    .project-root-cta { grid-template-columns: 1fr 1fr; }
}
.project-root-cta .cta-content { padding: 3rem; }
.project-root-cta .cta-content .cta-subtitle {
    text-transform: uppercase;
    color: var(--compost-green);
    font-size: 0.9rem;
    letter-spacing: 1px;
    font-weight: 700;
}
.project-root-cta .cta-content h2 {
    font-size: clamp(2.5rem, 5vw, 3rem);
    color: var(--dark-text);
    margin: 0.5rem 0 1.5rem 0;
}
.project-root-cta .cta-content p {
    color: var(--muted-text);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}
.project-root-cta .cta-content .cta-button { background: var(--compost-green); }
.project-root-cta .cta-image {
    width: 100%;
    height: 300px;
    order: -1; 
    border-radius: var(--radius-main) var(--radius-main) 0 0;
}
@media (min-width: 768px) {
    .project-root-cta .cta-image {
        height: 100%;
        order: 1; 
        border-radius: 0 var(--radius-main) var(--radius-main) 0;
    }
}
.project-root-cta .cta-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    border-left: 2px solid var(--border-color);
}
@media (max-width: 767px) {
    .project-root-cta .cta-image img {
        border-left: none;
        border-bottom: 2px solid var(--border-color);
    }
}

/* --- HERO SCENE (for info pages) --- */
.hero-scene {
    height: 60vh; /* Shorter hero */
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border-bottom: 2px solid var(--border-color);
}
.hero-scene .hero-overlay {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.4);
}
.hero-scene .hero-content {
    position: relative; z-index: 2;
    text-align: center; color: var(--light-text);
    padding: 1rem;
}
.hero-scene .hero-title {
    font-size: clamp(48px, 8vw, 100px);
    margin-bottom: 1rem;
    font-weight: 800;
}
.hero-scene .hero-subtitle {
    font-size: clamp(18px, 3vw, 24px);
    color: rgba(255, 255, 255, 0.9);
    margin: 1rem 0 2rem 0;
    font-style: italic;
}

/* --- CARD GRIDS --- */
.card-grid { display: grid; gap: 2rem; margin-top: 3rem; }
.card-grid.three-cols { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.info-page-card {
    background: var(--mid-bg);
    padding: 2rem;
    border-radius: var(--radius-main);
    border: 2px solid var(--border-color);
    box-shadow: 4px 4px 0px var(--border-color);
    transition: all 0.2s ease;
}
.info-page-card:hover {
    box-shadow: 2px 2px 0px var(--border-color);
    transform: translate(2px, 2px);
}
.info-page-card h3 {
    color: var(--dark-text);
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

/* --- HIGHLIGHT BOX --- */
.highlight-box {
    background: var(--mid-bg);
    border-radius: var(--radius-main);
    padding: 2.5rem; /* Reduced */
    margin: 3rem 0;
    border: 2px solid var(--border-color);
    text-align: center;
    border-left: 6px solid var(--theme-primary);
}

.highlight-box.soil {
    border-color: var(--compost-green);
    background-color: #f0fff4; /* A very light green */
}

.highlight-box .stats-title {
    margin-bottom: 1rem;
}

.highlight-box .text-xl {
    margin-bottom: 2rem;
}

.highlight-box .cta-button {
    box-shadow: 4px 4px 0px var(--compost-green);
    border-color: var(--compost-green);
}

.highlight-box .cta-button:hover {
    box-shadow: 2px 2px 0px var(--compost-green);
}

/* --- MINI STATS --- */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
}
.mini-stat {
    text-align: center;
    background: var(--mid-bg);
    padding: 2rem 1rem;
    border-radius: var(--radius-main);
    border: 2px solid var(--border-color);
    transition: all 0.2s ease;
    cursor: pointer;
}
.mini-stat:hover { 
    transform: translate(-4px, -4px);
    box-shadow: 8px 8px 0px var(--border-color);
}
.mini-stat-visual {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
    font-size: 2rem;
}
.mini-stat-number {
    font-size: 2.5rem;
    font-weight: 800;
    font-family: 'Inter', sans-serif;
    color: var(--dark-text);
    margin-bottom: 0.5rem;
}
.mini-stat-label { font-size: 0.9rem; color: var(--muted-text); text-transform: lowercase; }
.card-icon { font-size: 3rem; margin-bottom: 1rem; text-align: center; }

/* --- GUIDES (SORT & SOIL) --- */
.sorting-guide, .composting-guide {
    display: grid;
    gap: 2rem;
    margin: 3rem 0;
}
.bin-category, .compost-phase {
    background: var(--mid-bg);
    border-radius: var(--radius-main);
    overflow: hidden;
    border: 2px solid var(--border-color);
}
.bin-header, .phase-header {
    padding: 1.5rem;
    color: var(--light-text);
    text-align: center;
    border-bottom: 2px solid var(--border-color);
}
.phase-header { display: flex; justify-content: space-between; align-items: center; }
.bin-header h3, .phase-header h3 { font-size: 1.5rem; margin: 0; }
.bin-content, .phase-content { padding: 2rem; }
.phase-content { position: relative; }
.acceptable h4 { color: var(--compost-green); }
.contamination h4 { color: var(--waste-orange); }
.acceptable h4, .contamination h4 { font-size: 1.1rem; margin-bottom: 1rem; font-weight: 600; }
.acceptable ul, .contamination ul { list-style: none; padding: 0; }
.acceptable li, .contamination li {
    padding: 0.5rem 0;
    font-size: 0.95rem;
    border-bottom: 1px solid #EAEAEA;
}

/* --- SOIL-SPECIFIC --- */
.soil-layers { margin: 3rem 0; text-align: center; }
.layer-title { font-size: 2rem; margin-bottom: 2rem; }
.layer-diagram { max-width: 400px; margin: 0 auto; border: 2px solid var(--border-color); border-radius: var(--radius-main); overflow: hidden;}
.soil-layer {
    padding: 1.5rem;
    position: relative;
    border-bottom: 2px solid var(--border-color);
}
.soil-layer:last-child { border-bottom: none; }
.soil-layer.humus { background: #2D1B0E; color: var(--light-text); }
.soil-layer.topsoil { background: #8B4513; color: var(--light-text); }
.soil-layer.subsoil { background: #D2691E; color: var(--light-text); }
.layer-label { font-family: 'Inter', sans-serif; font-weight: 700; font-size: 1.2rem; margin-bottom: 0.5rem; }
.layer-description { font-size: 0.9rem; opacity: 0.9; }
.compost-ratio {
    background: var(--mid-bg);
    border-radius: var(--radius-main);
    padding: 2rem;
    margin: 2rem 0;
    border: 2px solid var(--border-color);
}
.ratio-visual { display: flex; align-items: center; justify-content: center; gap: 2rem; margin: 1rem 0; flex-wrap: wrap; }
.ratio-part {
    text-align: center; padding: 2rem; border-radius: 50%;
    min-width: 120px; min-height: 120px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    border: 2px solid var(--border-color);
}
.ratio-part.browns { background: var(--waste-orange); color: var(--light-text); }
.ratio-part.greens { background: var(--compost-green); color: var(--light-text); }
.ratio-number { font-size: 3rem; font-weight: 800; font-family: 'Inter', sans-serif; line-height: 1; }
.ratio-label { font-size: 0.85rem; text-transform: lowercase; margin-top: 0.5rem; }
.ratio-symbol { font-size: 3rem; font-weight: 800; color: var(--dark-text); }

/* --- MODAL STYLES --- */
.modal-overlay { 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(255, 255, 255, 0.7); 
    backdrop-filter: blur(10px); 
    z-index: 2000; display: flex; justify-content: center; align-items: center; 
    opacity: 0; pointer-events: none; transition: opacity 0.3s ease; 
}
.modal-overlay.visible { opacity: 1; pointer-events: auto; }
.modal-content { 
    background: var(--mid-bg); 
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main); 
    padding: 40px; max-width: 600px; 
    text-align: center; 
    transform: scale(0.95); 
    transition: transform 0.3s ease; 
    box-shadow: 8px 8px 0px var(--dark-text); 
    color: var(--dark-text); 
}
.modal-overlay.visible .modal-content { transform: scale(1); }
.modal-content h2 { font-size: 32px; margin-bottom: 16px;}
.modal-content p { color: var(--muted-text); margin-bottom: 32px; line-height: 1.6; }
.modal-source { margin-bottom: 32px; font-size: 14px; color: var(--muted-text); }
.modal-source a { color: var(--recycle-blue); text-decoration: none; }
.modal-source a:hover { text-decoration: underline; }

/* --- SHARED CTA BUTTON --- */
.cta-button { 
    background: var(--dark-text); 
    color: var(--light-text); 
    border: 2px solid var(--border-color);
    padding: 18px 40px; 
    font-size: 16px; 
    font-weight: 600; 
    border-radius: var(--radius-small);
    box-shadow: 4px 4px 0px var(--dark-text);
    cursor: pointer; 
    transition: all 0.1s ease-out; 
    font-family: 'Inter', sans-serif; 
    text-transform: capitalize; 
    letter-spacing: 0.5px;
    text-decoration: none;
    display: inline-block;
}
.cta-button:hover { 
    transform: translate(2px, 2px); 
    box-shadow: 2px 2px 0px var(--dark-text);
}
.cta-button:active {
    transform: translate(4px, 4px);
    box-shadow: 0px 0px 0px var(--dark-text);
}

/* --- GAME STYLES --- */
#game-container {
    width: 100%; 
    min-height: calc(100vh - (var(--nav-height) + 5px));
    display: flex;
    flex-direction: column; /* Ensure vertical layout */
    align-items: center;
    justify-content: center; /* Center the content vertically */
    overflow: hidden; 
}
.game-screen {
    text-align: center; padding: 1rem;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center; 
    width: 100%;
    min-height: calc(100vh - (var(--nav-height) + 5px));
    position: relative;
    background: var(--light-bg);
    overflow: hidden;
}
.game-header { margin-bottom: 1rem; /* Reduced */ z-index: 1; }
.game-title {
    font-size: clamp(2.5rem, 6vw, 4rem);
    line-height: 1.1; margin-bottom: 1rem;
    font-weight: 800;
}
.game-subtitle {
    color: var(--muted-text);
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    margin: 0 auto 1rem auto; /* Reduced */
    max-width: 500px;
}
.game-rules {
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-small);
    padding: 1rem 1.5rem;
    margin: 1rem auto; /* Reduced */
    font-weight: 500;
    max-width: 400px;
    color: var(--dark-text);
}
.high-score { 
    font-family: 'Inter', sans-serif; 
    font-weight: 700; 
    font-size: 1.2rem; 
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-small);
    padding: 1rem 1.5rem;
    margin: 1rem auto; /* Reduced */
}
.card-stack {
    position: relative; width: 100%; max-width: 380px;
    aspect-ratio: 380 / 540;
    margin-bottom: 1.5rem; /* Reduced */
    perspective: 1200px;
    z-index: 1; flex-shrink: 0; 
}
.game-card {
    position: absolute; width: 100%; height: 100%;
    background: var(--mid-bg);
    border-radius: var(--radius-main);
    box-shadow: 4px 4px 0px var(--border-color);
    cursor: pointer; overflow: hidden;
    user-select: none; touch-action: none;
    display: flex; flex-direction: column;
    border: 2px solid var(--border-color);
}
.game-card:not(:last-child) {
    transform: translateY(12px) scale(0.95);
    opacity: 0.5; z-index: -1; pointer-events: none;
}
.game-card:not(:last-child):not(:nth-last-child(2)) {
    transform: translateY(24px) scale(0.9);
    opacity: 0.2; z-index: -2;
}
.game-card.is-dragging {
    z-index: 10;
    box-shadow: 8px 8px 0px var(--border-color);
}
.card-image { width: 100%; height: 60%; background-size: cover; background-position: center; flex-shrink: 0; border-bottom: 2px solid var(--border-color);}
.card-info { padding: 1.25rem; height: 40%; display: flex; flex-direction: column; text-align: left; overflow: hidden; }
.card-name {
    font-family: 'Inter', sans-serif;
    font-size: clamp(1.25rem, 5vw, 1.6rem);
    font-weight: 700; color: var(--dark-text);
    margin-bottom: 0.5rem;
}
.card-name .card-age { font-weight: 400; color: var(--muted-text); font-family: 'Inter', sans-serif; }
.card-bio { flex-grow: 1; font-size: clamp(0.85rem, 3vw, 0.95rem); color: var(--muted-text); line-height: 1.5; margin-bottom: 1rem; }
.card-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.card-tag { font-size: 0.7rem; padding: 0.4rem 0.8rem; border-radius: 15px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.tag-sort { background: var(--theme-primary-faded); color: var(--theme-primary); }
.tag-soil { background: var(--theme-primary-faded); color: var(--theme-primary); }

.game-controls { display: flex; justify-content: center; gap: 1.5rem; z-index: 1; }
.control-btn {
    width: 60px; height: 60px;
    border-radius: 50%;
    border: 2px solid var(--border-color);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 4px 4px 0px var(--border-color);
    background: var(--mid-bg);
}
.control-btn:hover { 
    transform: translate(2px, 2px); 
    box-shadow: 2px 2px 0px var(--border-color);
}
.control-btn:active {
    transform: translate(4px, 4px);
    box-shadow: 0px 0px 0px var(--border-color);
}
.control-btn.reject { color: var(--waste-orange); }
.control-btn.accept { color: var(--theme-primary); }
.control-btn.reject:hover { background: var(--waste-orange); color: var(--light-text); }
.control-btn.accept:hover { background: var(--theme-primary); color: var(--light-text); }
.control-btn svg { width: 26px; height: 26px; }

.game-ui { position: absolute; top: 1.5rem; right: 1.5rem; z-index: 100; display: flex; gap: 1rem; }
.score-card, .streak-counter {
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    padding: 1rem 1.5rem;
    border-radius: var(--radius-small);
    text-align: center;
}
.score-number, .streak-number { font-family: 'Inter', sans-serif; font-weight: 800; font-size: 2rem; color: var(--dark-text); transition: transform 0.2s ease; }
.score-label, .streak-label { font-size: 0.8rem; color: var(--muted-text); text-transform: lowercase; font-weight: 500; }
.streak-counter { color: var(--waste-orange); }
.streak-pop { transform: scale(1.2); }

.card-detail-modal { 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(249, 249, 249, 0.8); 
    backdrop-filter: blur(10px); 
    display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 1rem; 
    opacity: 0; pointer-events: none; transition: opacity 0.3s ease; 
}
.card-detail-modal.visible { opacity: 1; pointer-events: all; }
.card-detail-content { 
    background: var(--mid-bg); 
    border-radius: var(--radius-main); 
    max-width: 480px; width: 100%; max-height: 90vh; overflow-y: auto; 
    box-shadow: 8px 8px 0px var(--border-color); 
    position: relative; 
    border: 2px solid var(--border-color); 
    transform: scale(0.95); transition: transform 0.3s ease; 
}
.card-detail-modal.visible .card-detail-content { transform: scale(1); }
.detail-image { width: 100%; height: 280px; background-size: cover; background-position: center; border-bottom: 2px solid var(--border-color); border-radius: 10px 10px 0 0;}
.detail-info { padding: 1.5rem 2rem 2rem; }
.detail-title { font-size: 1.8rem; margin-bottom: 1.5rem; font-weight: 700;}
.detail-stats { list-style: none; padding: 0; margin: 0; }
.detail-stats li { margin-bottom: 1rem; font-size: 1rem; color: var(--muted-text); line-height: 1.6; padding-left: 1.25rem; border-left: 3px solid var(--theme-primary); }
.detail-stats strong { color: var(--dark-text); font-weight: 600; text-transform: capitalize; }
.detail-close-btn { position: absolute; top: 1rem; right: 1rem; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.5); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.5rem; transition: all 0.2s ease; border: none; }
.detail-close-btn:hover { background: rgba(0,0,0,0.8); transform: scale(1.1); }

.streak-bonus { position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(45deg, #FFD700, #FFA500); color: var(--dark-text); padding: 1rem 2rem; border-radius: 25px; font-family: 'Inter', sans-serif; font-weight: 700; font-size: 1.5rem; z-index: 1000; box-shadow: 0 8px 32px rgba(255, 215, 0, 0.4); animation: bonusPop 2s ease forwards; pointer-events: none; border: 2px solid var(--border-color);}
@keyframes bonusPop {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    30% { transform: translate(-50%, -50%) scale(1.2) rotate(3deg); opacity: 1; }
    60% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
}
.game-mode-selection { display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap; justify-content: center; }

.game-card.is-inactive {
    transform: scale(0.95) !important;
    opacity: 0.7 !important;
    filter: blur(3px);
}

/* --- END-GAME REVIEW --- */
.end-screen { justify-content: space-around; padding: 2rem 1rem; }
.review-section {
    width: 100%; max-width: 800px;
    margin: 1rem 0; padding: 1.5rem;
    background: var(--mid-bg);
    border-radius: var(--radius-main);
    border: 2px solid var(--border-color);
}
.review-title {
    font-size: 1.25rem; font-weight: 600;
    text-align: center; margin-bottom: 1.5rem;
}
.review-items { 
    display: grid; 
    grid-template-columns: 1fr; 
    gap: 1rem;
}
.review-card {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 1rem;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-small);
}
.review-card-image {
    width: 80px; height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-color);
    flex-shrink: 0;
}
.review-card-info h4 {
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 0.25rem;
}
.review-card-info p {
    font-size: 0.95rem;
    color: var(--muted-text);
    line-height: 1.5;
}
.review-card-info p strong {
    color: var(--dark-text);
}

/* --- NEW: Two-Column Layout for Info Pages --- */
.two-column-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: center;
    margin-bottom: 4rem;
}
@media (min-width: 768px) {
    .two-column-layout {
        grid-template-columns: 1fr 1fr;
    }
}
.two-column-layout .column img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--radius-main);
    aspect-ratio: 4 / 3;
}
.two-column-layout .column h3 {
    font-size: 2rem;
    margin-bottom: 1rem;
}

/* --- NEW: What Goes Where? Section --- */
.what-goes-where {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-top: 3rem;
}
@media (min-width: 768px) {
    .what-goes-where {
        grid-template-columns: 1fr 1fr;
    }
}
.bin-section {
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    padding: 2rem;
}
.bin-section h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    text-align: center;
}
.bin-section.recycle-bin h3 { color: var(--recycle-blue); }
.bin-section.landfill-bin h3 { color: var(--waste-orange); }
.item-list {
    list-style: none;
    padding: 0;
}
.item-list li {
    display: flex;
    align-items: center;
    font-size: 1.1rem;
    margin-bottom: 1rem;
}
.item-list .icon {
    font-size: 1.5rem;
    margin-right: 1rem;
}


/* --- Burger Animation --- */
body.nav-open .nav-burger div {
    transition: all 0.3s ease-in-out;
}
body.nav-open .nav-burger div:nth-child(1) {
    transform: translateY(8px) rotate(45deg);
}
body.nav-open .nav-burger div:nth-child(2) {
    opacity: 0;
}
body.nav-open .nav-burger div:nth-child(3) {
    transform: translateY(-8px) rotate(-45deg);
}

/* --- Spacing Adjustments --- */
.content-section {
    padding: 3rem 2rem;
}
.content-block {
    margin-bottom: 3rem;
}
.stats-grid {
    margin: 4rem 0;
}
.card-grid {
    margin: 4rem 0;
}
.highlight-box {
    margin: 5rem 0;
}


/* --- PROJECT-ROOT.HTML STYLES --- */
.steps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}
.step-card {
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    padding: 2rem;
    position: relative;
    padding-top: 3rem;
}
.step-number {
    position: absolute;
    top: -1.5rem;
    left: 1.5rem;
    background: var(--compost-green);
    color: var(--light-text);
    width: 3rem;
    height: 3rem;
    line-height: 3rem;
    text-align: center;
    border-radius: 50%;
    font-size: 1.5rem;
    border: 2px solid var(--border-color);
    font-weight: 700;
}
.step-card h3 { font-size: 1.5rem; margin-bottom: 1rem; font-weight: 700;}
.step-card p { color: var(--muted-text); }

.signup-form {
    max-width: 600px;
    margin: 2rem auto;
    background: var(--mid-bg);
    padding: 2.5rem;
    border-radius: var(--radius-main);
    border: 2px solid var(--border-color);
}
.signup-form label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
}
.signup-form input[type="text"],
.signup-form input[type="email"],
.signup-form select {
    width: 100%;
    padding: 14px;
    margin-bottom: 1.5rem;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-small);
    font-size: 1rem;
    font-family: 'Inter', sans-serif;
}
.signup-form input[type="text"]:focus,
.signup-form input[type="email"]:focus,
.signup-form select:focus {
    outline: none;
    border-color: var(--theme-primary);
    box-shadow: 0 0 0 3px var(--theme-primary-faded);
}
.signup-form .cta-button {
    width: 100%;
    background: var(--compost-green);
}

/* --- NEW: Survey Form Specific Styles --- */
.signup-form fieldset {
    border: none;
    padding: 0;
    margin-bottom: 2rem;
}
.signup-form legend {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
    width: 100%;
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 0.5rem;
}
.signup-form .fieldset-description {
    font-size: 1rem;
    color: var(--muted-text);
    margin-bottom: 1.5rem;
}
.signup-form .info-box {
    background: var(--light-bg);
    border: 2px solid var(--border-color);
    border-left: 5px solid var(--compost-green);
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-radius: var(--radius-small);
}
.signup-form .info-box p {
    margin-bottom: 1rem;
}
.signup-form .info-box ul {
    list-style-position: inside;
    padding-left: 0.5rem;
}
.signup-form .info-box li {
    margin-bottom: 0.5rem;
}

.radio-group {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
}
.radio-group label {
    display: block;
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-small);
    padding: 1rem 1.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 500;
}
.radio-group label:hover {
    background: var(--light-bg);
    transform: translateY(-2px);
}
.radio-group input[type="radio"] {
    display: none; /* Hide the actual radio button */
}
.radio-group input[type="radio"]:checked + label {
    background: var(--compost-green);
    color: var(--light-text);
    border-color: var(--compost-green);
    box-shadow: 4px 4px 0px var(--dark-text);
    transform: translate(-2px, -2px);
}


/* --- FOOTER --- */
.main-footer {
    background: var(--dark-text);
    padding: 4rem 2rem;
    color: var(--light-text);
}
.footer-container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    text-align: center;
}
@media (min-width: 768px) {
    .footer-container {
        grid-template-columns: 1fr auto 1fr;
        text-align: left;
    }
}
.footer-logo {
    font-size: 1.5rem;
    color: var(--light-text);
    font-weight: 700;
}
.footer-links {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: center;
}
.footer-link {
    color: var(--light-text);
    text-decoration: none;
    font-weight: 500;
}
.footer-link:hover {
    color: var(--compost-green);
}
.footer-social {
    font-size: 0.9rem;
    display: flex;
    flex-direction: column;
    align-items: center;
}
@media (min-width: 768px) {
    .footer-social {
        align-items: flex-end;
    }
}
.social-icons {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
}
.social-icon {
    color: var(--light-text);
    text-decoration: none;
    font-size: 1.5rem;
}
.social-icon:hover {
    color: var(--compost-green);
}

/* --- ACCORDION --- */
.accordion {
    width: 100%;
    margin: 3rem 0;
}
.accordion-item {
    background: var(--mid-bg);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-main);
    margin-bottom: 1rem;
    overflow: hidden; /* Important */
}
.accordion-header {
    padding: 1.5rem 2rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--mid-bg);
    transition: background-color 0.2s ease;
}
.accordion-header:hover {
    background-color: var(--light-bg);
}
.accordion-header h3 {
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 1.5rem;
    margin: 0;
}
.accordion-toggle {
    font-size: 2rem;
    font-weight: 700;
    transition: transform 0.3s ease;
}
.accordion-item.active .accordion-toggle {
    transform: rotate(45deg);
}
.accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out, padding 0.3s ease-out;
    padding: 0 2rem;
}
.accordion-content.show {
    max-height: 1000px; /* Large value */
    padding: 1.5rem 2rem 2rem;
    border-top: 2px solid var(--border-color);
}
.accordion-content .bin-content,
.accordion-content .phase-content {
    padding: 0;
}


/* --- GAME REFINEMENT STYLES --- */
.page-sort .control-btn.accept { color: var(--recycle-blue); }
.page-sort .control-btn.accept:hover { background: var(--recycle-blue); }
.page-soil .control-btn.accept { color: var(--compost-green); }
.page-soil .control-btn.accept:hover { background: var(--compost-green); }
.page-sort .tag-sort { background: var(--theme-primary-faded); color: var(--theme-primary); }
.page-soil .tag-soil { background: var(--theme-primary-faded); color: var(--theme-primary); }
.page-sort .detail-stats li { border-left-color: var(--recycle-blue) !important; }
.page-soil .detail-stats li { border-left-color: var(--compost-green) !important; }

.swipe-feedback {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) rotate(-15deg);
    font-family: 'Inter', sans-serif;
    font-size: 2.5rem;
    font-weight: 700;
    text-transform: uppercase;
    padding: 0.5rem 1.5rem;
    border-radius: var(--radius-small);
    border: 4px solid;
    z-index: 100;
    pointer-events: none;
    opacity: 0;
    animation: feedbackPop 0.5s ease-out;
}
@keyframes feedbackPop {
    0% { transform: translate(-50%, -50%) rotate(-15deg) scale(0.5); opacity: 0; }
    50% { transform: translate(-50%, -50%) rotate(-15deg) scale(1.1); opacity: 1; }
    100% { transform: translate(-50%, -50%) rotate(-15deg) scale(1); opacity: 1; }
}
.swipe-feedback.correct {
    color: var(--compost-green);
    border-color: var(--compost-green);
}
.swipe-feedback.wrong {
    color: var(--waste-orange);
    border-color: var(--waste-orange);
}

.control-btn.is-active {
    transform: translate(2px, 2px) scale(1.05);
    box-shadow: 2px 2px 0px var(--border-color);
}
.control-btn.reject.is-active { background: var(--waste-orange); color: var(--light-text); }

/* --- NEW: Game Feedback Animations --- */
@keyframes correct-flash-anim {
    0% { background-color: rgba(58, 125, 58, 0); }
    50% { background-color: rgba(58, 125, 58, 0.3); }
    100% { background-color: rgba(58, 125, 58, 0); }
}
@keyframes wrong-flash-anim {
    0% { background-color: rgba(217, 95, 48, 0); }
    50% { background-color: rgba(217, 95, 48, 0.3); }
    100% { background-color: rgba(217, 95, 48, 0); }
}
.correct-flash .game-screen {
    animation: correct-flash-anim 0.5s ease-out;
}
.wrong-flash .game-screen {
    animation: wrong-flash-anim 0.5s ease-out;
}

/* --- NEW: MOBILE NAVIGATION & RESPONSIVENESS --- */
.nav-burger {
    display: none; /* Hidden on desktop */
    flex-direction: column;
    gap: 5px;
    cursor: pointer;
    z-index: 2001; /* Above overlay */
}
.nav-burger div {
    width: 25px;
    height: 3px;
    background-color: var(--dark-text);
    border-radius: 3px;
    transition: all 0.3s ease;
}
.mobile-nav-menu {
    display: none; /* Hidden by default */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    z-index: 2000;
    transform: translateY(-100%);
    transition: transform 0.3s ease-in-out;
}
.mobile-nav-menu.open {
    transform: translateY(0);
}
.mobile-nav-menu .nav-item {
    font-size: 2rem;
    font-weight: 700;
}
.mobile-nav-menu .nav-cta {
    font-size: 1.5rem;
}

/* Burger animation */
body.nav-open .nav-burger div:nth-child(1) {
    transform: translateY(8px) rotate(45deg);
}
body.nav-open .nav-burger div:nth-child(2) {
    opacity: 0;
}
body.nav-open .nav-burger div:nth-child(3) {
    transform: translateY(-8px) rotate(-45deg);
}


/* --- RESPONSIVE BREAKPOINT --- */
@media (max-width: 768px) {
    .nav-links {
        display: none; /* Hide desktop links */
    }
    .nav-burger {
        display: flex; /* Show burger menu */
    }
    .mobile-nav-menu {
        display: flex; /* Allow mobile menu to be shown */
    }

    .home-burger-menu { /* Ensure home burger is also visible on mobile */
        display: flex;
    }

    .content-section {
        padding: 3rem 1rem;
    }
    .hero-title {
        font-size: clamp(40px, 12vw, 80px); /* Adjust mobile font */
    }
    .stats-title {
        font-size: 2.5rem;
    }

    /* Stack all grids */
    .waste-stats,
    .home-topic-grid,
    .project-root-cta,
    .stats-grid,
    .card-grid.three-cols,
    .steps-grid,
    .footer-container,
    .topic-card-buttons {
        grid-template-columns: 1fr;
    }

    .project-root-cta .cta-image img {
        border-left: none;
        border-bottom: 2px solid var(--border-color);
    }
    .project-root-cta .cta-image {
        height: 250px;
    }
    .project-root-cta .cta-content {
        padding: 2rem;
    }

    .footer-container {
        text-align: center;
    }
    .footer-social {
        text-align: center;
    }
    
    .game-ui {
        top: 1rem;
        right: 1rem;
    }
    .game-header {
        margin-bottom: 1rem;
    }
    .card-stack {
        margin-bottom: 1rem;
    }
    .control-btn {
        width: 55px;
        height: 55px;
    }
    .game-controls {
        gap: 1rem;
    }

    .review-card {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
}
